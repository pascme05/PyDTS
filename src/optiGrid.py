#######################################################################################################################
#######################################################################################################################
# Title:        PyDTS (Python Deep Timeseries Simulation)
# Topic:        Black-Box Modeling
# File:         optiGrid
# Date:         03.11.2023
# Author:       Dr. Pascal A. Schirmer
# Version:      V.0.1
# Copyright:    Pascal Schirmer
#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
# Import libs
#######################################################################################################################
# ==============================================================================
# Internal
# ==============================================================================
from src.main import main

# ==============================================================================
# External
# ==============================================================================


#######################################################################################################################
# Function
#######################################################################################################################
def optiGrid(setupExp, setupDat, setupPar, setupMdl, setupPath):
    ###################################################################################################################
    # MSG IN
    ###################################################################################################################
    print("----------------------------------------------------------------------------------------------------------")
    print("----------------------------------------------------------------------------------------------------------")
    print("Welcome to PyDTS: A toolkit for timeseries simulation")
    print("Mode:       Optimising Grid")
    print("Author:     Dr. Pascal A. Schirmer")
    print("Copyright:  Pascal Schirmer")
    print("Version:    v.0.1")
    print("Date:       14.09.2023")
    print("----------------------------------------------------------------------------------------------------------")
    print("----------------------------------------------------------------------------------------------------------")
    print("\n\n")

    ###################################################################################################################
    # Initialisation
    ###################################################################################################################
    setupExp['nameInit'] = setupExp['name']
    setupPar['optPara1'] = [300, 600, 900, 1200, 1500, 1800, 2100, 2400]
    setupPar['optPara2'] = [0.5]
    setupPar['optACC'] = 3                                                                                              # 0) ACC, 1) F1, 2) R2, 3) TECA, 4) RMSE, 5) MAE, 6) Max, 7) Pred 8) Grt 9) All

    ###################################################################################################################
    # Calculation
    ###################################################################################################################
    for i in range(0, len(setupPar['optPara1'])):
        for ii in range(0, len(setupPar['optPara2'])):
            # ==============================================================================
            # Init
            # ==============================================================================
            setupExp['name'] = setupExp['nameInit'] + '_Grid' + str(i) + str(ii)
            setupExp['save'] = 1

            # ==============================================================================
            # Select Parameter
            # ==============================================================================
            setupPar['window'] = setupPar['optPara1'][i]
            setupPar['overlap'] = setupPar['window'] - 10
            setupPar['yFocus'] = setupPar['window'] - 1
            setupDat['fs'] = setupPar['optPara2'][ii]

            # ==============================================================================
            # Calculation
            # ==============================================================================
            main(setupExp, setupDat, setupPar, setupMdl, setupPath)
